import{r as D,ax as M,R as d,ay as b,az as U,aA as A,aB as C,aC as O,aD as _}from"./index-ed74213a.js";var R={},q={get exports(){return R},set exports(e){R=e}},V={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j=D,z=M;function B(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P=typeof Object.is=="function"?Object.is:B,W=z.useSyncExternalStore,F=j.useRef,G=j.useEffect,H=j.useMemo,I=j.useDebugValue;V.useSyncExternalStoreWithSelector=function(e,t,p,n,a){var u=F(null);if(u.current===null){var i={hasValue:!1,value:null};u.current=i}else i=u.current;u=H(function(){function c(r){if(!h){if(h=!0,y=r,r=n(r),a!==void 0&&i.hasValue){var o=i.value;if(a(o,r))return S=o}return S=r}if(o=S,P(y,r))return o;var s=n(r);return a!==void 0&&a(o,s)?o:(y=r,S=s)}var h=!1,y,S,f=p===void 0?null:p;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,p,n,a]);var l=W(e,u[0],u[1]);return G(function(){i.hasValue=!0,i.value=l},[l]),I(l),l};(function(e){e.exports=V})(q);function $(e,t,p,n){let a=[A.run({fn:u=>t(u)})];if(n&&a.unshift(n),p){let u=C({node:a}),i=e.graphite.id,l=p.additionalLinks,c=l[i]||[];return l[i]=c,c.push(u),()=>{let h=c.indexOf(u);h!==-1&&c.splice(h,1),O(u)}}{let u=C({node:a,parent:[e],family:{owners:e}});return()=>{O(u)}}}function J(e,t){b.store(e)||E("expect useStore argument to be a store");let p=d.useCallback(a=>$(e,a,t),[e,t]),n=d.useCallback(()=>N(e,t),[e,t]);return L(p,n,n)}function Q(e,t){let p=b.unit(e),n={};p?n={unit:e}:"@@unitShape"in e?typeof e["@@unitShape"]=="function"?n=e["@@unitShape"]():E("expect @@unitShape to be a function"):n=e;let a=Array.isArray(n),u=d.useRef({stale:1,justSubscribed:0,scope:t}),[i,l,c]=d.useMemo(()=>{u.current.stale=1;let f=Array.isArray(n)?[]:{},r=[],o=[];for(let s in n){let v=n[s];b.unit(v)||E("expect useUnit argument to be a unit"),b.event(v)||b.effect(v)?f[s]=t?_(v,{scope:t}):v:(f[s]=null,r.push(s),o.push(v))}return[f,r,o]},[u,t,...Object.keys(n),...Object.values(n)]),h=d.useRef({value:i,storeKeys:l}),y=d.useCallback(f=>{let r=u.current;r.justSubscribed=1;let o=()=>{r.stale||(r.stale=1,f())},s=A.compute({priority:"sampler",batch:1}),v=c.map(x=>$(x,o,t,s));return()=>{v.forEach(x=>x())}},[c,t,h,u]),S=d.useCallback(()=>{let f,r=h.current,o=u.current,s=0,v=r.value,x=r.storeKeys,g=t!==o.scope;if(o.stale||o.justSubscribed||g){s=!o.justSubscribed||g,f=a?[...i]:{...i},x.length!==l.length&&(s=1);for(let m=0;m<l.length;m++){let k=N(c[m],t),w=l[m];s||(s=x.includes(w)?v[w]!==k:1),f[w]=k}}return s&&(r.value=f),r.storeKeys=l,o.stale=0,o.justSubscribed=!s,o.scope=t,p?r.value.unit:r.value},[y,c,t,h,u]);return L(y,S,S)}function K(e){let t=d.useContext(T);return e&&!t&&E("No scope found, consider adding <Provider> to app root"),t}function Y(e,t){return J(e,K(t==null?void 0:t.forceScope))}function Z(e,t){return Q(e,K(t==null?void 0:t.forceScope))}let E=e=>{throw Error(e)};typeof window<"u"?d.useLayoutEffect:d.useEffect;const{useSyncExternalStore:L}=U,N=(e,t)=>t?t.getState(e):e.getState(),T=d.createContext(null);export{Y as a,Z as i};
