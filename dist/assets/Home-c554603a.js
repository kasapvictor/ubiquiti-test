import{q as D,k as e,X as j,n as c,f as b,h as k,B as u,l as T,T as z,i as g,A as p,Q as f,j as q,Y as n,Z as A,b as h,D as C,a0 as O,a1 as I,a2 as v,p as y,a3 as M,G as E,a4 as w,a5 as K,a6 as N}from"./index-ed74213a.js";import{E as S}from"./ErrorBlock-2b216bce.js";import{C as Q,P as _,W as H}from"./Webflow-1e200305.js";import{u as R,p as F,C as P}from"./immer.esm-44995c49.js";import{u as B}from"./use-form-721559d2.js";import{I as Y}from"./IconTrash-867080ac.js";import{S as G}from"./SuccessBlock-d7ef8ef1.js";import{T as V}from"./Table-a93bceb9.js";import{T as $}from"./Title-f1bbc2af.js";var U=D("pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);const m=({fullWidth:t=!1})=>e.jsx(e.Fragment,{children:e.jsx(j,{size:"md",title:"Add new workspace",trigger:e.jsx(c,{size:"lg",fullWidth:t,children:"Add workspace"}),children:e.jsx(X,{})})}),X=({onClose:t})=>{const s=R(),l=b(),i=k({mutationFn:({title:r})=>g({url:p.WORKSPACE.ADD,data:{title:r}}),onSuccess:(r,{title:o})=>{l.setQueryData([f.WORKSPACES],d=>[...d,r]),t&&t(),s.success({message:`ðŸ‘ŒWorkspace ${o} added!`})}}),a=B({initialValues:{title:""},validate:{title:r=>r.length?null:"Incorrect title"}});return e.jsxs(e.Fragment,{children:[i.error&&e.jsx(u,{mb:"md",children:e.jsx(S,{reset:i.reset,children:i.error})}),e.jsx("form",{onSubmit:a.onSubmit(r=>i.mutate(r)),children:e.jsxs(T,{direction:"column",gap:"lg",children:[e.jsx(z,{"data-autofocus":!0,withAsterisk:!0,label:"Name",...a.getInputProps("title"),disabled:i.isLoading}),e.jsx(c,{type:"submit",size:"lg",fullWidth:!0,loading:i.isLoading,children:"Add"})]})})]})},Z=()=>{const{t}=q("translation",{keyPrefix:"faq"});return e.jsxs(n,{variant:"filled",children:[e.jsxs(n.Item,{value:"customization",children:[e.jsx(n.Control,{icon:e.jsx(A,{size:h(20)}),children:"Customization"}),e.jsx(n.Panel,{children:e.jsx(C,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t("1")}})})})]}),e.jsxs(n.Item,{value:"flexibility",children:[e.jsx(n.Control,{icon:e.jsx(A,{size:h(20)}),children:"Flexibility"}),e.jsx(n.Panel,{children:e.jsx(C,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t("2")}})})})]}),e.jsxs(n.Item,{value:"focus-ring",children:[e.jsx(n.Control,{icon:e.jsx(A,{size:h(20)}),children:"No annoying focus ring"}),e.jsx(n.Panel,{children:e.jsx(C,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t("3")}})})})]})]})},J=()=>e.jsx(j,{size:"xl",title:"FAQ",trigger:e.jsx(c,{size:"lg",variant:"light",fullWidth:!0,children:"FAQ"}),children:e.jsx(Z,{})}),ee=()=>O({queryKey:[f.WORKSPACES],queryFn:()=>g({url:p.WORKSPACE.LIST,method:I.GET}),networkMode:"always",staleTime:1/0,cacheTime:1/0}),te=({workspaceId:t,workspaceTitle:s})=>e.jsx(e.Fragment,{children:e.jsx(j,{size:"md",title:"Delete Wordkspace",trigger:e.jsx(v,{children:e.jsx(Y,{color:"gray",size:"1rem"})}),children:e.jsx(re,{workspaceId:t,workspaceTitle:s})})}),re=({workspaceId:t,workspaceTitle:s,onClose:l})=>{const i=R(),a=b(),r=p.WORKSPACE.REMOVE.replace("{id}",String(t)),o=k({mutationFn:()=>g({url:r,method:I.POST}),onSuccess:()=>{a.setQueryData([f.WORKSPACES],d=>F(d,W=>W.filter(x=>x.id!==t))),l&&l(),i.success({message:`ðŸ‘ŒWorkspace ${s} deleted!`})}});return e.jsx(e.Fragment,{children:e.jsxs(u,{children:[e.jsxs(y,{size:"sm",color:"dimmed",mb:"xl",children:["ATANTION!!!! Workspace: ",s,"!!!! Lorem ipsum dolor sit amet, consectetur adipisicing elit. Architecto consequatur, deserunt ea ipsum mollitia provident soluta totam vero voluptatum. Ducimus"]}),o.error&&e.jsx(u,{mb:"md",children:e.jsx(S,{reset:o.reset,children:o.error})}),e.jsx(c,{size:"lg",mb:"md",fullWidth:!0,variant:"danger",onClick:o.mutate,loading:o.isLoading,children:"Yes! Do It!"}),e.jsx(c,{size:"lg",variant:"light",fullWidth:!0,onClick:l,children:"No! Please! No!"})]})})},se=({workspace:t})=>e.jsx(e.Fragment,{children:e.jsx(j,{size:"md",title:"Rename workspace",trigger:e.jsx(v,{children:e.jsx(U,{color:"gray",size:"1rem"})}),children:e.jsx(ie,{workspace:t})})}),ie=({workspace:t})=>{const s=b(),l=p.WORKSPACE.UPDATE.replace("{id}",String(t.id)),i=k({mutationFn:({title:r})=>g({url:l,method:"patch",data:{title:r}}),onSuccess:(r,o)=>{s.setQueryData([f.WORKSPACES],d=>F(d,W=>{const x=W.find(L=>L.id===t.id);x&&(x.title=o.title)}))}}),a=B({initialValues:{title:t.title||""},validate:{title:r=>r===t.title?"Same name":r.length?null:"Incorrect title"}});return e.jsxs(e.Fragment,{children:[i.error&&e.jsx(u,{mb:"md",children:e.jsx(S,{reset:i.reset,children:i.error})}),i.isSuccess?e.jsx(u,{mb:"md",children:e.jsx(G,{children:"Done!"})}):e.jsx("form",{onSubmit:a.onSubmit(r=>i.mutate(r)),children:e.jsxs(T,{direction:"column",gap:"lg",children:[e.jsx(z,{withAsterisk:!0,label:"Name",...a.getInputProps("title"),disabled:i.isLoading}),e.jsx(c,{type:"submit",size:"lg",fullWidth:!0,loading:i.isLoading,children:"Rename"})]})})]})},ne=({workspaces:t})=>e.jsxs(V,{horizontalSpacing:"2rem",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(s=>e.jsx(oe,{workspace:s},s.id))})]}),oe=({workspace:t})=>{const{colors:s}=M();return e.jsxs("tr",{children:[e.jsx("td",{children:t.title}),e.jsx("td",{children:e.jsxs(E,{position:"right",children:[e.jsx(se,{workspace:t}),e.jsx(te,{workspaceId:t.id,workspaceTitle:t.title}),e.jsx(w,{to:`/workspace/${t.id}`,children:e.jsx(v,{children:e.jsx(K,{color:s.gray[6],size:h(16)})})})]})})]})},ye=()=>{var s;const t=ee();return t.isLoading?e.jsx(le,{}):t.isError?e.jsx(ae,{error:t.error}):(s=t.data)!=null&&s.length?e.jsx(P,{title:"Workspaces",titleSize:"lg",pb:0,topButton:e.jsx(m,{}),children:e.jsx(ne,{workspaces:t.data})}):e.jsx(ce,{})},le=()=>e.jsx(P,{title:"Workspaces",titleSize:"lg",topButton:e.jsx(m,{}),withHeaderBottomBorder:!0,children:e.jsxs(E,{px:"1.85rem",pt:"xl",pb:"xs",children:[e.jsx(y,{children:"Loading ..."})," ",e.jsx(N,{size:"1rem"})]})}),ae=({error:t})=>e.jsx(P,{title:"Workspaces",titleSize:"lg",topButton:e.jsx(m,{}),withHeaderBottomBorder:!0,children:e.jsx(S,{px:"lg",children:e.jsxs(y,{children:[t,"lalla"]})})}),ce=()=>e.jsxs(e.Fragment,{children:[e.jsx(Q,{title:"Add workspaces",children:e.jsx(m,{})}),e.jsxs(_,{icon:e.jsx(H,{}),children:[e.jsx($,{order:1,children:"Create new Workspace"}),e.jsx(y,{align:"center",color:"dimmed",mb:"lg",children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. A animi aspernatur ducimus fugit minus obcaecati, quod totam veniam?"}),e.jsx(m,{fullWidth:!0}),e.jsx(J,{})]})]});export{ye as default};
